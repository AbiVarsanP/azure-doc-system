{% extends "base.html" %}

{% block title %}Manage Students - Staff{% endblock %}

{% block content %}
  <h3 class="mb-3">Manage Students</h3>

  <div class="card p-4 mb-4">
    <h5 class="mb-3">All Students</h5>
    {% if students and students|length > 0 %}
      <ul class="list-group">
        {% for s in students %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              {{ s[1] }}
              {% if s[2] %}
                <div class="small text-muted">Mentor: {{ s[2] }}</div>
              {% else %}
                <div class="small text-muted">No mentor assigned</div>
              {% endif %}
            </div>
            <div>
              {% if s[2] == mentor %}
                <form method="post" action="/staff/unmap_student/{{ s[0] }}" style="display:inline">
                  <button class="btn btn-sm btn-outline-danger">Unmap</button>
                </form>
              {% elif not s[2] %}
                <form method="post" action="/staff/map_student/{{ s[0] }}" style="display:inline">
                  <button class="btn btn-sm btn-primary">Map</button>
                </form>
              {% else %}
                <span class="text-muted small">Assigned to {{ s[2] }}</span>
              {% endif %}
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="text-muted">No students found.</div>
    {% endif %}
  </div>

{% endblock %}
